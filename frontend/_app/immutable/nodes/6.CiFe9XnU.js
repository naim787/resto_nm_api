import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{o as U}from"../chunks/C0WiqiGc.js";import{p as q,f as d,a as n,i as C,s as o,c as r,b as E,m as F,g as t,r as e,t as I}from"../chunks/COSkQsm4.js";import{s as p}from"../chunks/CWFEHnWU.js";import{i as K}from"../chunks/BQ8w4ybz.js";import{e as L,i as Q}from"../chunks/BwS77tqc.js";import{s as A}from"../chunks/DFCodPOx.js";import{i as T}from"../chunks/C6hNewRt.js";var V=d('<div class="card bg-white shadow-md p-4 border border-gray-200"><div class="flex items-center gap-4"><img class="w-16 h-16 rounded object-cover"/> <div><h2 class="text-xl font-semibold"> </h2> <p class="text-sm text-gray-500"> </p> <p class="text-sm text-gray-500"> </p></div></div> <div class="mt-2 text-sm text-gray-700"><p><span class="font-medium">Waktu:</span> </p> <p><span class="font-medium">Meja:</span> </p> <p><span class="font-medium">Waiter:</span> </p></div></div>'),X=d('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),Y=d('<p class="text-gray-500">Belum ada pesanan masuk...</p>'),Z=d('<div class="min-h-screen bg-base-100 p-4"><h1 class="text-3xl font-bold mb-4">📋 Daftar Pesanan Masuk</h1> <!></div>');function la(S,$){q($,!1);const O="http://10.10.9.27:3001";let c,l=F([]);U(()=>{c=new WebSocket("ws://10.10.9.27:3001/ws/orders"),c.onopen=()=>console.log("✅ WebSocket connected"),c.onmessage=s=>{console.log("📥 Raw data from WS:",s.data);try{const a=JSON.parse(s.data);console.log("📦 Parsed:",a),Array.isArray(a)?m(a):a.orders&&Array.isArray(a.orders)?m(a.orders):a.payload&&Array.isArray(a.payload)?m(a.payload):console.log("ℹ️ Unrecognized format:",a)}catch(a){console.error("❌ JSON parse error:",a)}},c.onerror=s=>console.error("🛑 WebSocket error",s),c.onclose=()=>console.log("🔌 WebSocket closed")});function m(s){E(l,s.map(a=>({...a,products:P(a.products)}))),console.log(t(l))}function P(s){try{return typeof s=="string"?JSON.parse(s):s}catch{return console.warn("⚠️ Gagal parsing products:",s),{}}}T();var v=Z(),J=o(r(v),2);{var M=s=>{var a=X();L(a,5,()=>t(l),Q,(j,i)=>{var g=V(),f=r(g),u=r(f),y=o(u,2),_=r(y),D=r(_,!0);e(_);var x=o(_,2),R=r(x);e(x);var k=o(x,2),z=r(k);e(k),e(y),e(f);var w=o(f,2),b=r(w),B=o(r(b));e(b);var h=o(b,2),G=o(r(h));e(h);var W=o(h,2),H=o(r(W));e(W),e(w),e(g),I(()=>{A(u,"src",`${O}${t(i).products.image_url}`),A(u,"alt",t(i).products.name),p(D,t(i).products.name),p(R,`Harga: Rp ${t(i).products.price??""}`),p(z,`Diskon: ${t(i).products.discount??""}%`),p(B,` ${t(i).time||"-"}`),p(G,` ${t(i).table_id||"-"}`),p(H,` ${t(i).waiter_id||"-"}`)}),n(j,g)}),e(a),n(s,a)},N=s=>{var a=Y();n(s,a)};K(J,s=>{t(l).length>0?s(M):s(N,!1)})}e(v),n(S,v),C()}export{la as component};
